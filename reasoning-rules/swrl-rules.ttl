@prefix hi: <https://w3id.org/hi-ontology#> .
@prefix swrl: <http://www.w3.org/2003/11/swrl#> .
@prefix swrla: <http://swrl.stanford.edu/ontologies/3.3/swrla.owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

#################################################################
# VARIABLE SHORTCUTS
#################################################################

hi:team    a swrl:Variable .
hi:goal    a swrl:Variable .
hi:task    a swrl:Variable .
hi:agent   a swrl:Variable .
hi:cap     a swrl:Variable .
hi:exec    a swrl:Variable .
hi:context a swrl:Variable .
hi:phen    a swrl:Variable .
hi:cons    a swrl:Variable .

#################################################################
# RULE 1 — TEAM + GOAL + CAPABILITY → ELIGIBILITY
#################################################################

[
  a swrl:Imp ;
  swrla:isRuleEnabled "true"^^xsd:boolean ;
  rdfs:label "Rule 1 — Eligibility from Capabilities" ;
  rdfs:comment "If team has goal requiring a task and a member has a capability allowing that task, the agent is eligible." ;

  swrl:body (
    [ a swrl:ClassAtom ; swrl:classPredicate hi:HITeam ; swrl:argument1 hi:team ]
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:hasGoal ; swrl:argument1 hi:team ; swrl:argument2 hi:goal ]
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:requiresTask ; swrl:argument1 hi:goal ; swrl:argument2 hi:task ]
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:hasMember ; swrl:argument1 hi:team ; swrl:argument2 hi:agent ]
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:hasCapability ; swrl:argument1 hi:agent ; swrl:argument2 hi:cap ]
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:allowsTask ; swrl:argument1 hi:cap ; swrl:argument2 hi:task ]
  ) ;

  swrl:head (
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:isEligibleForTask ; swrl:argument1 hi:agent ; swrl:argument2 hi:task ]
  )
] .

#################################################################
# RULE 2 — ASSIGNMENT + EXECUTION REALIZATION → PERFORMED BY
#################################################################

[
  a swrl:Imp ;
  swrla:isRuleEnabled "true"^^xsd:boolean ;
  rdfs:label "Rule 2 — Assignment → Execution performed by agent" ;
  rdfs:comment "If an agent is assigned to a task, and an execution realizes that task, then the execution is performed by the agent." ;

  swrl:body (
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:isAssignedToTask ; swrl:argument1 hi:agent ; swrl:argument2 hi:task ]
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:realizedBy ; swrl:argument1 hi:task ; swrl:argument2 hi:exec ]
  ) ;

  swrl:head (
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:performedBy ; swrl:argument1 hi:exec ; swrl:argument2 hi:agent ]
  )
] .

#################################################################
# RULE 3A — CONTEXT PHENOMENA PROPAGATE TO TEAM AGENTS
#################################################################

[
  a swrl:Imp ;
  swrla:isRuleEnabled "true"^^xsd:boolean ;
  rdfs:label "Rule 3a — Context → Agent Phenomena" ;
  rdfs:comment "If a team operates in a context with a phenomenon, every agent inherits that phenomenon." ;

  swrl:body (
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:operatesInContext ; swrl:argument1 hi:team ; swrl:argument2 hi:context ]
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:hasMember ; swrl:argument1 hi:team ; swrl:argument2 hi:agent ]
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:hasPhenomenonConcept ; swrl:argument1 hi:context ; swrl:argument2 hi:phen ]
  ) ;

  swrl:head (
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:hasPhenomenonConcept ; swrl:argument1 hi:agent ; swrl:argument2 hi:phen ]
  )
] .

#################################################################
# RULE 3B — CONTEXT CONSTRAINTS PROPAGATE TO TEAM AGENTS
#################################################################

[
  a swrl:Imp ;
  swrla:isRuleEnabled "true"^^xsd:boolean ;
  rdfs:label "Rule 3b — Context → Agent Constraints" ;
  rdfs:comment "If a team operates in a context with a constraint, every agent inherits that constraint." ;

  swrl:body (
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:operatesInContext ; swrl:argument1 hi:team ; swrl:argument2 hi:context ]
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:hasMember ; swrl:argument1 hi:team ; swrl:argument2 hi:agent ]
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:hasConstraintConcept ; swrl:argument1 hi:context ; swrl:argument2 hi:cons ]
  ) ;

  swrl:head (
    [ a swrl:IndividualPropertyAtom ; swrl:propertyPredicate hi:hasConstraintConcept ; swrl:argument1 hi:agent ; swrl:argument2 hi:cons ]
  )
] .

#################################################################
# RULE 4 — Assignment Implies Eligibility
#################################################################

[
  a swrl:Imp ;
  swrla:isRuleEnabled "true"^^xsd:boolean ;
  rdfs:label "Rule 4 — Assignment implies eligibility" ;
  rdfs:comment "If an agent is assigned to a task, then the agent must also be eligible for that task." ;

  swrl:body (
    [ a swrl:IndividualPropertyAtom ;
      swrl:propertyPredicate hi:isAssignedToTask ;
      swrl:argument1 hi:agent ;
      swrl:argument2 hi:task ]
  ) ;

  swrl:head (
    [ a swrl:IndividualPropertyAtom ;
      swrl:propertyPredicate hi:isEligibleForTask ;
      swrl:argument1 hi:agent ;
      swrl:argument2 hi:task ]
  )
] .
